import React, { useEffect, useState } from 'react'
import { api } from '../lib/api'
import Rating from 'react-rating-stars-component'
import { Table, TableBody, TableCell, TableContainer, TableHead, TableRow, Paper, Stack, Typography } from '@mui/material'
export default function RecipeTable({ onSelect }) { const [recipes,setRecipes]=useState([]); useEffect(()=>{ api.get('/api/recipes?page=1&limit=20').then(res=>{ setRecipes(res.data.data || res.data.recipes || []) }).catch(()=>setRecipes([])) },[]); return (<Stack spacing={2}><TableContainer component={Paper}><Table><TableHead><TableRow><TableCell>Title</TableCell><TableCell>Cuisine</TableCell><TableCell>Rating</TableCell><TableCell>Total Time</TableCell><TableCell>Serves</TableCell></TableRow></TableHead><TableBody>{recipes.map(r=> (<TableRow key={r._id||r.id} hover onClick={()=>onSelect(r)} className="cursor-pointer"><TableCell><Typography className="truncate max-w-[320px]" title={r.title}>{r.title}</Typography></TableCell><TableCell>{r.cuisine||'-'}</TableCell><TableCell><Rating value={Number(r.rating)||0} count={5} edit={false} size={20} isHalf /></TableCell><TableCell>{r.total_time??'-'}</TableCell><TableCell>{r.serves??'-'}</TableCell></TableRow>))}</TableBody></Table></TableContainer></Stack>) }
